machine:
  php:
    version: 5.6.2
  hosts:
    symfony.demo: 127.0.0.1
  timezone:
    Asia/Tokyo

dependencies:
  pre:
    # application
    - sudo composer self-update
    - pecl install xdebug
    - cat ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/xdebug.ini | sed -e "s/;//" > xdebug.ini
    - mv xdebug.ini ~/.phpenv/versions/$(phpenv version-name)/etc/conf.d/xdebug.ini
  post:
    # configure virtual host
    - cp tests/_envs/circle/vhosts.conf /etc/apache2/sites-available/vhosts.conf
    - a2ensite vhosts.conf
    - a2enmod rewrite
    - ln -s /etc/apache2/mods-available/headers.load /etc/apache2/mods-enabled/
    - sudo service apache2 restart

test:
  override:
#    - ./bin/phpunit --coverage-text --coverage-clover=coverage.clover
#    - ./bin/codecept run --verbose
